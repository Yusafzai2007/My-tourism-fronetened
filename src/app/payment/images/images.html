<div
  class="lg:flex md:flex justify-around justify-center items-center space-y-6 lg:space-y-0 md:space-y-0"
>
  <!-- Table Section -->
  <div class="p-6 lg:p-24 w-full overflow-x-auto">
    <table class="w-full border-collapse">
      <thead class="bg-gradient-to-r from-blue-600 to-gray-800 text-white">
        <tr>
          <th class="px-6 py-4 text-left font-semibold">ID</th>
          <th class="px-6 py-4 text-left font-semibold">Image</th>
          <th class="px-6 py-4 text-left font-semibold">Title</th>
          <th class="px-6 py-4 text-left font-semibold">Order-Date</th>
          <th class="px-6 py-4 text-left font-semibold">Adults</th>
          <th class="px-6 py-4 text-left font-semibold">Children</th>
          <th class="px-6 py-4 text-left font-semibold">Transfer</th>
          <th class="px-6 py-4 text-left font-semibold">Total</th>
          <th class="px-6 py-4 text-left font-semibold">Actions</th>
        </tr>
      </thead>

      <tbody>
        <!-- Loop through users -->
        <ng-container *ngFor="let data of dep; let i = index">
          <!-- Loop through each user's cart -->
          <tr
            *ngFor="let item of data.cart"
            class="border-t border-gray-200 hover:bg-gray-50 transition-colors"
          >
            <!-- ID -->
            <td class="px-6 py-4 border-2 border-slate-200 text-center">
              {{ i + 1 }}
            </td>

            <!-- Image -->
            <td class="px-4 py-4 border-2 border-slate-200">
              <div class="w-20 h-20 flex items-center justify-center">
                <img
                  [src]="item.product_id.thumbnailimage[0]"
                  alt="Product Image"
                  class="max-w-full max-h-full object-cover rounded-xl"
                />
              </div>
            </td>

            <!-- Title -->
            <td class="px-6 py-4 text-indigo-600 border-2 border-slate-200 max-w-[300px] truncate">
              {{ item.product_id.producttitle }}
            </td>

            <!-- Order Date -->
            <td class="px-6 py-4 text-center border-2 border-slate-200">
              {{ item.order_date }}
            </td>

            <!-- Adults -->
            <td class="px-6 py-4 text-center border-2 border-slate-200">
              {{ item.adult_no === 0 ? item.private_adult_no : item.adult_no }}
            </td>

            <!-- Children -->
            <td class="px-6 py-4 text-center border-2 border-slate-200">
              {{ item.child_no == 0 ? item.private_child_no : item.child_no }}
            </td>

            <!-- Transfer -->
            <td class="px-6 py-4 text-center border-2 border-slate-200">
              {{ item.transport_type == 0 ? item.private_transport_type : item.transport_type }}
            </td>

            <!-- Total -->
            <td class="px-6 py-4 text-center border-2 border-slate-200">
              <span class="text-xs">PKR:</span> <span>{{ item.total }}</span>
            </td>

            <!-- Actions -->
            <td class="px-6 py-4 text-center border-2 border-slate-200">
              <button
                *ngIf="!isModalOpen"
                (click)="openModal()"
                class="text-red-600 hover:text-red-800 transition-colors"
                title="Delete Booking"
              >
                <i class="fa-solid fa-trash-can"></i>
              </button>
            </td>
          </tr>
        </ng-container>
      </tbody>
    </table>
  </div>

  <!-- Contact Help Box -->
  <div class="flex justify-center mt-5 lg:mt-0">
    <div
      class="border-2 border-gray-300 w-52 h-52 flex items-center justify-center rounded-xl shadow-lg hover:shadow-2xl transition-all"
    >
      <div class="text-center space-y-2">
        <h1 class="text-xl font-normal">Need Help?</h1>
        <h1 class="text-xl font-bold text-[#004030]">+971 54 540 4171</h1>
        <h1 class="text-base font-light text-gray-600">Available 24/7</h1>
      </div>
    </div>
  </div>
</div>

<button></button>

<!-- Modal -->
<!-- Modal -->
<div
  *ngIf="isModalOpen"
  class="fixed inset-0 bg-black/60 flex items-center justify-center z-50 backdrop-blur-sm transition-all duration-300"
>
  <div
    class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md relative transform transition-all scale-100 hover:scale-[1.01]"
  >
    <!-- Close Button -->
    <button
      (click)="closeModal()"
      class="absolute top-3 right-3 text-gray-400 hover:text-gray-700 transition-all duration-200"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="2"
        stroke="currentColor"
        class="w-6 h-6"
      >
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>

    <!-- Icon -->
    <div class="flex justify-center mb-4">
      <div class="bg-gradient-to-r from-blue-600 to-gray-800 p-4 rounded-full shadow-md">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="2"
          stroke="white"
          class="w-10 h-10"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M12 9v2m0 4h.01m-6.938 4h13.856A2.062 2.062 0 0021 16.938V7.062A2.062 2.062 0 0018.938 5H5.062A2.062 2.062 0 003 7.062v9.876A2.062 2.062 0 005.062 19z"
          />
        </svg>
      </div>
    </div>

    <!-- Content -->
    <div class="text-center">
      <h3 class="text-xl font-semibold text-gray-800 mb-3">Confirm Deletion</h3>
      <p class="text-gray-600 mb-6">
        Are you sure you want to delete this product? This action cannot be undone.
      </p>

      <!-- Buttons -->
      <div class="flex justify-center space-x-4">
        <ng-container *ngFor="let data of dep">
          <ng-container *ngFor="let item of data.cart">
            <button
              (click)="deletebooking(data._id, item._id)"
              class="bg-gradient-to-r from-blue-600 to-gray-800 text-white px-6 py-2.5 rounded-lg shadow-md hover:shadow-lg hover:scale-105 transition-all duration-300 flex items-center gap-2"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="2"
                stroke="currentColor"
                class="w-5 h-5"
              >
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 13l3 3L22 4" />
              </svg>
              Yes, Delete
            </button>
          </ng-container>
        </ng-container>

        <button
          (click)="closeModal()"
          class="px-6 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center gap-2"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="2"
            stroke="currentColor"
            class="w-5 h-5"
          >
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
          Cancel
        </button>
      </div>
    </div>
  </div>
</div>

<app-payment-form></app-payment-form>

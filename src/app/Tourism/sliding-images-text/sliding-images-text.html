<div
  *ngIf="isModalOpen"
  class="fixed inset-0 bg-black/60 flex items-center justify-center z-50 backdrop-blur-sm"
>
  <div
    class="bg-white rounded-3xl shadow-2xl w-11/12 md:w-4/5 lg:w-2/3 xl:w-1/2 p-6 md:p-8 relative transform transition-all duration-300 scale-100 hover:scale-[1.01] mx-4"
  >
    <button
      (click)="closeModal()"
      class="absolute top-4 right-4 text-gray-400 hover:text-gray-700 transition duration-200 w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100"
    >
      ✕
    </button>

    <h2 class="text-2xl md:text-3xl font-extrabold text-emerald-700 mb-6 text-center">
      Book Tour: {{ selectedProduct?.producttitle }}
    </h2>

    <form class="space-y-6" (ngSubmit)="bookNow()">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
        <div class="space-y-4">
          <div>
            <label class="block text-gray-700 font-semibold mb-2 text-sm md:text-base">Date</label>
            <input
              [(ngModel)]="bookingdata.order_date"
              type="date"
              name="order_date"
              class="w-full border border-gray-300 p-3 md:p-4 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition duration-200 shadow-sm"
            />
          </div>
          <div>
            <label class="block text-gray-700 font-semibold mb-2 text-sm md:text-base"
              >Adults</label
            >
            <input
              [(ngModel)]="bookingdata.adult_no"
              type="number"
              name="adult_no"
              placeholder="Number of Adults"
              class="w-full border border-gray-300 p-3 md:p-4 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition duration-200 shadow-sm"
            />
          </div>
        </div>

        <div class="space-y-4">
          <div>
            <label class="block text-gray-700 font-semibold mb-2 text-sm md:text-base"
              >Children</label
            >
            <input
              [(ngModel)]="bookingdata.child_no"
              type="number"
              name="child_no"
              placeholder="Number of Children"
              class="w-full border border-gray-300 p-3 md:p-4 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition duration-200 shadow-sm"
            />
          </div>
          <div>
            <label class="block text-gray-700 font-semibold mb-2 text-sm md:text-base">Total</label>
            <input
              [(ngModel)]="bookingdata.total"
              name="total"
              type="text"
              placeholder="Total Price"
              class="w-full border border-gray-300 p-3 md:p-4 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition duration-200 shadow-sm"
            />
          </div>
        </div>
      </div>

      <div>
        <label class="block text-gray-700 font-semibold mb-2 text-sm md:text-base">Tour Type</label>
        <input
          [(ngModel)]="bookingdata.transport_type"
          type="text"
          name="transport_type"
          placeholder="Tour Type"
          class="w-full border border-gray-300 p-3 md:p-4 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition duration-200 shadow-sm"
        />
      </div>

      <div class="flex flex-col sm:flex-row gap-3 md:gap-4 pt-4">
        <button
          type="submit"
          class="flex-1 bg-gradient-to-r from-emerald-500 to-teal-600 text-white px-6 py-3 md:py-4 rounded-xl font-semibold shadow-lg hover:from-emerald-600 hover:to-teal-700 transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]"
        >
          Confirm Booking
        </button>

        <button
          *ngIf="selectedProduct?.Isprivate"
          type="button"
          (click)="openPrivateModal()"
          class="flex-1 bg-gradient-to-r from-amber-500 to-orange-600 text-white px-6 py-3 md:py-4 rounded-xl font-semibold shadow-lg hover:from-amber-600 hover:to-orange-700 transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]"
        >
          Private Book
        </button>
      </div>
    </form>
  </div>
</div>

<div
  *ngIf="isPrivateModalOpen"
  class="fixed inset-0 bg-black/60 flex items-center justify-center z-50 backdrop-blur-sm"
>
  <div
    class="bg-white rounded-3xl shadow-2xl w-11/12 md:w-4/5 lg:w-2/3 xl:w-1/2 p-6 md:p-8 relative transform transition-all duration-300 scale-100 hover:scale-[1.01] mx-4"
  >
    <button
      (click)="closePrivateModal()"
      class="absolute top-4 right-4 text-gray-400 hover:text-gray-700 transition duration-200 w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100"
    >
      ✕
    </button>

    <h2 class="text-2xl md:text-3xl font-extrabold text-amber-700 mb-6 text-center">
      Private Tour Booking
    </h2>

    <form class="space-y-6" (ngSubmit)="bookNow()">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
        <div class="space-y-4">
          <div>
            <label class="block text-gray-700 font-semibold mb-2 text-sm md:text-base">Date</label>
            <input
              [(ngModel)]="bookingdata.order_date"
              type="date"
              name="private_order_date"
              class="w-full border border-gray-300 p-3 md:p-4 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition duration-200 shadow-sm"
            />
          </div>
          <div>
            <label class="block text-gray-700 font-semibold mb-2 text-sm md:text-base"
              >Private Adults</label
            >
            <input
              [(ngModel)]="bookingdata.private_adult_no"
              type="number"
              name="private_adult_no"
              placeholder="Number of Adults"
              class="w-full border border-gray-300 p-3 md:p-4 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition duration-200 shadow-sm"
            />
          </div>
        </div>

        <div class="space-y-4">
          <div>
            <label class="block text-gray-700 font-semibold mb-2 text-sm md:text-base"
              >Private Children</label
            >
            <input
              [(ngModel)]="bookingdata.private_child_no"
              type="number"
              name="private_child_no"
              placeholder="Number of Children"
              class="w-full border border-gray-300 p-3 md:p-4 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition duration-200 shadow-sm"
            />
          </div>
          <div>
            <label class="block text-gray-700 font-semibold mb-2 text-sm md:text-base">Total</label>
            <input
              [(ngModel)]="bookingdata.total"
              name="private_total"
              type="text"
              placeholder="Total Price"
              class="w-full border border-gray-300 p-3 md:p-4 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition duration-200 shadow-sm"
            />
          </div>
        </div>
      </div>

      <div>
        <label class="block text-gray-700 font-semibold mb-2 text-sm md:text-base"
          >Private Transport Type</label
        >
        <input
          [(ngModel)]="bookingdata.private_transport_type"
          type="text"
          name="private_transport_type"
          placeholder="Transport Type"
          class="w-full border border-gray-300 p-3 md:p-4 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition duration-200 shadow-sm"
        />
      </div>

      <button
        type="submit"
        class="w-full mt-6 bg-gradient-to-r from-amber-500 to-orange-600 text-white px-6 py-3 md:py-4 rounded-xl font-semibold shadow-lg hover:from-amber-600 hover:to-orange-700 transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]"
      >
        Confirm Private Booking
      </button>
    </form>
  </div>
</div>

<div class="min-h-screen bg-gradient-to-br from-slate-50 to-emerald-50 px-4 sm:px-6 lg:px-8 py-8">
  <main class="max-w-7xl mx-auto">
    <!-- Hero Section -->
    <section class="bg-white rounded-2xl shadow-2xl overflow-hidden mb-10 border border-gray-100">
      <!-- Full-width Image Container -->
      <div class="w-full relative">
        <div
          class="aspect-[16/6] md:aspect-[16/5] bg-gradient-to-br from-emerald-600 to-teal-700 relative overflow-hidden"
        >
          <img
            [src]="
              dep[0].thumbnailimage[0] ||
              'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=60'
            "
            alt="Tour Destination"
            class="w-full h-full object-cover opacity-90"
          />
          <div class="absolute inset-0 bg-black/20"></div>
          <div
            class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-6 md:p-8"
          >
            <div class="max-w-4xl mx-auto">
              <h1 class="text-2xl sm:text-4xl md:text-5xl font-bold text-white mb-3 leading-tight">
                {{ dep[0]?.producttitle }}
              </h1>
              <p class="text-emerald-100 text-lg md:text-xl font-light max-w-2xl">
                {{
                  dep[0]?.productdescription ||
                    'Experience the journey of a lifetime with our exclusive tour package'
                }}
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Content Grid -->
      <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 p-6 md:p-8">
        <!-- Image Gallery Sidebar -->
        <div class="lg:col-span-4 order-2 lg:order-1">
          <div class="bg-gray-50 rounded-xl p-4 border border-gray-200">
            <h3 class="font-semibold text-gray-800 mb-4 text-lg">Tour Gallery</h3>

            <!-- Full-size images -->
            <div class="space-y-4">
              <div
                class="flex items-center justify-center w-full"
                *ngFor="let img of dep; let i = index"
              >
                <div
                  class="flex items-center justify-center w-full"
                  *ngIf="i < 2"
                >
                  <img
                    [src]="img.thumbnailimage[1]"
                    [alt]="'Gallery image ' + (i + 1)"
                    class="w-full h-[250px] object-cover rounded-xl"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Main Content -->
        <div class="lg:col-span-8 order-1 lg:order-2">
          <div class="bg-white rounded-xl p-6 border border-gray-200 shadow-sm">
            <!-- Highlights -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
              <div class="text-center p-4 bg-emerald-50 rounded-lg border border-emerald-100">
                <div class="text-2xl font-bold text-emerald-700 mb-1">
                  {{ dep[0]?.duration || '8h' }}
                </div>
                <div class="text-sm text-gray-600">Duration</div>
              </div>
              <div class="text-center p-4 bg-amber-50 rounded-lg border border-amber-100">
                <div class="text-2xl font-bold text-amber-700 mb-1">
                  {{ dep[0]?.wifi ? 'Yes' : 'No' }}
                </div>
                <div class="text-sm text-gray-600">Free WiFi</div>
              </div>
              <div class="text-center p-4 bg-violet-50 rounded-lg border border-violet-100">
                <div class="text-2xl font-bold text-violet-700 mb-1">
                  {{ dep[0]?.translatelanguages || '3' }}
                </div>
                <div class="text-sm text-gray-600">Languages</div>
              </div>
              <div class="text-center p-4 bg-rose-50 rounded-lg border border-rose-100">
                <div class="text-2xl font-bold text-rose-700 mb-1">
                  {{ dep[0]?.Isprivate ? 'Private' : 'Group' }}
                </div>
                <div class="text-sm text-gray-600">Tour Type</div>
              </div>
            </div>

            <!-- Description -->
            <div class="prose max-w-none">
              <h3 class="text-xl font-semibold text-gray-800 mb-4">Tour Overview</h3>
              <p class="text-gray-600 leading-relaxed">
                {{
                  dep[0]?.productdescription ||
                    'Discover breathtaking landscapes and cultural landmarks with our expertly curated tour. This immersive experience combines comfort, adventure, and local insights to create unforgettable memories.'
                }}
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Tour Packages Section -->
    <section class="grid gap-6 md:gap-8">
      <div
        *ngFor="let product of dep; let pi = index"
        class="p-6 border rounded-2xl shadow-lg bg-white hover:shadow-xl transition-all duration-300 border-gray-200 overflow-hidden"
      >
        <div class="flex flex-col lg:flex-row items-start gap-6 md:gap-8">
          <!-- Image Section -->
          <div class="w-full lg:w-2/5">
            <div
              class="aspect-[4/3] rounded-xl overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200 w-full relative h-auto"
            >
              <img
                [src]="
                  product.thumbnailimage[0] ||
                  'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=60'
                "
                [alt]="product.producttitle"
                class="w-full max-w-full h-auto object-cover hover:scale-105 transition duration-500"
              />
          
            </div>
          </div>

          <!-- Content Section -->
          <div class="w-full lg:w-3/5">
            <div
              class="p-6 rounded-xl bg-gradient-to-br from-slate-50 to-emerald-50 border border-emerald-100"
            >
              <div class="flex flex-col md:flex-row md:items-start md:justify-between mb-4">
                <h2 class="text-2xl font-bold text-emerald-800 mb-2 md:mb-0">
                  {{ product.producttitle }}
                </h2>
                <div class="flex items-center gap-2">
                  <span
                    class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-emerald-100 text-emerald-800"
                  >
                    {{ product.category }}
                  </span>
                </div>
              </div>

              <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-3 text-gray-700 mb-6">
                <p class="flex items-center gap-2">
                  <i class="fa-solid fa-clock text-emerald-600 w-4"></i>
                  <strong class="text-emerald-700">Duration:</strong> {{ product.duration }}
                </p>
                <p class="flex items-center gap-2">
                  <i class="fa-solid fa-bus text-emerald-600 w-4"></i>
                  <strong class="text-emerald-700">Transport:</strong> {{ product.transportService }}
                </p>
                <p class="flex items-center gap-2">
                  <i class="fa-solid fa-location-dot text-emerald-600 w-4"></i>
                  <strong class="text-emerald-700">Pickup:</strong> {{ product.pickup }}
                </p>
                <p class="flex items-center gap-2">
                  <i class="fa-solid fa-language text-emerald-600 w-4"></i>
                  <strong class="text-emerald-700">Languages:</strong> {{ product.translatelanguages }}
                </p>
                <p class="flex items-center gap-2">
                  <i class="fa-solid fa-wifi text-emerald-600 w-4"></i>
                  <strong class="text-emerald-700">Free WiFi:</strong>
                  {{ product.wifi ? 'Yes' : 'No' }}
                </p>
                <p class="flex items-center gap-2">
                  <i class="fa-solid fa-users text-emerald-600 w-4"></i>
                  <strong class="text-emerald-700">Tour Type:</strong>
                  {{ product.Isprivate ? 'Private' : 'Group' }}
                </p>
              </div>

              <!-- Pricing -->
              <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">
                <div class="space-y-1">
                  <div class="text-2xl font-bold text-gray-900">
                    ${{ product.adultbaseprice }}
                    <span class="text-sm font-normal text-gray-600">per adult</span>
                  </div>
                  <div class="text-lg text-gray-700">
                    ${{ product.childbaseprice }}
                    <span class="text-sm text-gray-600">per child</span>
                  </div>
                </div>

                <button
                  (click)="openModal(product)"
                  class="bg-gradient-to-r from-emerald-600 to-teal-700 text-white px-8 py-3 rounded-lg font-semibold hover:from-emerald-700 hover:to-teal-800 transition-all duration-300 shadow-md hover:shadow-lg transform hover:scale-105 flex items-center justify-center gap-2"
                >
                  <i class="fa-solid fa-calendar-check"></i>
                  Book Now
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
</div>